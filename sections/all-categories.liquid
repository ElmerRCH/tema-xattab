{% schema %}
{
  "name": "All Categories",
  "tag": "section",
  "class": "shopify-section--all-categories",
  "settings": [
    {
      "type": "text",
      "id": "section_heading",
      "label": "Título",
      "default": "Categorías"
    },
    {
      "type": "collection_list",
      "id": "collections_to_show",
      "label": "Colecciones a mostrar",
      "limit": 20
    }
  ]
}
{% endschema %}

{% stylesheet %}
<style>
  .all-categories-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }
</style>
{% endstylesheet %}

{% javascript %}{% endjavascript %}

{% assign collections = settings.collections_to_show %}

<section class="px-4 py-8">
  {% if settings.section_heading != blank %}
    <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">{{ settings.section_heading }}</h2>
  {% endif %}

  <div class="all-categories-grid">
    {% for collection in collections %}
      <a href="{{ collection.url }}" class="border rounded-lg overflow-hidden shadow-sm bg-white dark:bg-gray-800 hover:shadow-md transition-all">
        {% if collection.image %}
          <img 
            src="{{ collection.image | image_url: width: 400 }}"
            alt="{{ collection.title | escape }}"
            class="w-full h-48 object-cover"
          >
        {% else %}
          <div class="w-full h-48 bg-gray-100 flex items-center justify-center text-gray-400">
            Sin imagen
          </div>
        {% endif %}
        <div class="p-4">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">{{ collection.title }}</h3>
        </div>
      </a>
    {% endfor %}
  </div>
</section>
