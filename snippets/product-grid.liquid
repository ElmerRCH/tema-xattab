{%- assign products = collection.products | default: collection.items -%}

{%- if products == blank and search_results -%}
  {%- assign products = search_results.items | where: "object_type", "product" -%}
{%- endif -%}

{% if products.size > 0 %}
  <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
    {% for product in products %}
       
    {% endfor %}
  </div>
{% else %}
  <p>No se encontraron productos.</p>
{% endif %}


<div class="bg-gray-50 mb-4 sm:grid gap-4 sm:grid-cols-2 md:mb-8 lg:grid-cols-3 xl:grid-cols-4 p-5 rounded-b-md">
            
    {% for product in products%}
        
        <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800 mb-4 sm:mb-0">
            <div class="h-56 w-full">
                <a href="{{ product.url }}">
                    <img 
                        width="100",
                        height="100",
                        src="{{ product.featured_image | image_url: width: 600 }}" 
                        alt="{{ product.title }}" 
                        class="w-full h-64 object-cover"
                    />
                </a>
            </div>
            <div class="pt-6">
                <a href="#" class="text-lg font-semibold leading-tight text-gray-900 hover:underline dark:text-white">{{ product.title }}</a>
                <ul class="mt-2 flex items-center gap-4">
                    <li class="flex items-center gap-2">
                    <svg class="h-4 w-4 color-text-brand " aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h6l2 4m-8-4v8m0-8V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v9h2m8 0H9m4 0h2m4 0h2v-4m0 0h-5m3.5 5.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-10 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z" />
                    </svg>
                    <p class="text-sm font-medium text-black ">Envio rapido</p>
                    </li>
                </ul>

                <div class="mt-4 flex items-center justify-between gap-4">
                    <p class="text-2xl font-extrabold leading-tight text-gray-900 dark:text-white">{{ product.price | money }}</p>
                     {% if product.available %}
                        <form method="post" action="{{routes.cart_add_url }}" class="add-to-cart-form">
                            <input type="hidden" name="id" value="{{ product.variants.first.id }}">
                            <button type="submit" class="bg-brand-color inline-flex items-center rounded-lg bg-primary-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-primary-800 focus:outline-none focus:ring-4  focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">
                                <svg class="-ms-2 me-2 h-5 w-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4h1.5L8 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm.75-3H7.5M11 7H6.312M17 4v6m-3-3h6" />
                                </svg>
                                Agregar
                            </button>
                        </form>
                    {% else %}
                        <span class="px-1 py-1">No disponible</span>
                    {% endif %} 

                </div>
            </div>
        </div>

    {% endfor %}
    
    <!-- PaginaciÃ³n -->
    {% if paginate.pages > 1 %}
        <div class="flex justify-center mt-10 space-x-2 col-span-4">
            {% if paginate.previous %}
            <a href="{{ paginate.previous.url }}" class="px-4 py-2 border rounded hover:bg-gray-100">Anterior</a>
            {% endif %}

            {% for part in paginate.parts %}
            {% if part.is_link %}
                <a href="{{ part.url }}" class="px-3 py-1 border rounded hover:bg-gray-100">{{ part.title }}</a>
            {% elsif part.title == paginate.current_page %}
                <span class="px-3 py-1 border rounded bg-gray-800 text-white">{{ part.title }}</span>
            {% else %}
                <span class="px-3 py-1">{{ part.title }}</span>
            {% endif %}
            {% endfor %}

            {% if paginate.next %}
            <a href="{{ paginate.next.url }}" class="px-4 py-2 border rounded hover:bg-gray-100">Siguiente</a>
            {% endif %}
        </div>
    {% endif %}
            
</div>


